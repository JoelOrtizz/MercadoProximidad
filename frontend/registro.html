<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro</title>
    <style> body { font-family: sans-serif; padding: 2rem; display: flex; flex-direction: column; gap: 10px; max-width: 300px;} </style>
</head>
<body>
    
    <h1>Crear cuenta</h1>
    <input type="text" id="nombre" placeholder="Nombre completo">
    <input type="text" id="nickname" placeholder="Nickname">
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Contraseña">
    <button onclick="handleRegister()">Registrarse</button>
    <br>
    <a href="login.html">Volver al login</a>

    <script src="main.js"></script>
    <script>
        async function handleRegister() {
            const body = {
                nombre: document.getElementById('nombre').value,
                nickname: document.getElementById('nickname').value,
                email: document.getElementById('email').value,
                contrasena: document.getElementById('password').value
            };

            try {
                await apiFetch('/usuarios', 'POST', body);
                alert('Usuario creado. Ahora inicia sesión.');
                window.location.href = 'login.html';
            } catch (e) {
                // Error manejado en main.js
            }
        }
    </script>
</body>
</html>