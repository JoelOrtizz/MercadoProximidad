http:
  routers:
    # Dashboard de Traefik accesible por internet, protegido con Basic Auth.
    # Se accede por: https://terreta.shop/traefik/dashboard/
    traefik-dashboard:
      rule: "(Host(`terreta.shop`) || Host(`www.terreta.shop`)) && PathPrefix(`/traefik`)"
      entryPoints:
        - websecure
      service: api@internal
      middlewares:
        - dashboard-auth
        - strip-traefik-prefix
      tls:
        certResolver: letsencrypt
        domains:
          - main: "terreta.shop"
            sans:
              - "www.terreta.shop"

  middlewares:
    dashboard-auth:
      basicAuth:
        usersFile: /etc/traefik/users.htpasswd

    strip-traefik-prefix:
      stripPrefix:
        prefixes:
          - /traefik

